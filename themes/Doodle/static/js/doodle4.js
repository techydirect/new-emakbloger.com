jQuery(document).ready(function(o){"use strict";o(".mvp-fly-but-click").on("click",function(){o("#mvp-fly-wrap").toggleClass("mvp-fly-menu"),o("#mvp-fly-wrap").toggleClass("mvp-fly-shadow"),o(".mvp-fly-but-wrap").toggleClass("mvp-fly-open"),o(".mvp-fly-fade").toggleClass("mvp-fly-fade-trans")});o(".back-to-top").on("click",function(e){return e.preventDefault(),o("html, body").animate({scrollTop:0},500),!1}),o(".mvp-search-click").on("click",function(){o("#mvp-search-wrap").toggleClass("mvp-search-toggle")}),o(".mvp-mob-soc-click").on("click",function(){o(".mvp-mob-soc-list").toggleClass("mvp-mob-soc-tog")}),o(".mvp-post-trend-but-click").on("click",function(){o("#mvp-post-trend-wrap").toggleClass("mvp-post-trend-tog")}),o(".mvp-com-click").on("click",function(){o("#comments").show(),o("#disqus_thread").show(),o("#mvp-comments-button").hide()}),o(".mvp-ad-rel-click").on("click",function(){o("#mvp-content-main").css("max-height","none"),o("#mvp-ad-rel-wrap").css("margin-top","20px"),o("#mvp-ad-rel-top").hide()}),o(".mvp-feat1-right-wrap").each(function(){o(this).find(".mvp-tab-col-cont").hide(),o(this).find("ul.mvp-feat1-list-buts li.mvp-feat-col-tab").addClass("active").show(),o(this).find(".mvp-tab-col-cont:first").show()}),o("ul.mvp-feat1-list-buts li").on("click",function(e){o(this).parents(".mvp-feat1-right-wrap").find("ul.mvp-feat1-list-buts li").removeClass("active"),o(this).addClass("active"),o(this).parents(".mvp-feat1-right-wrap").find(".mvp-tab-col-cont").hide();var t=o(this).find("a").attr("href");o(this).parents(".mvp-feat1-right-wrap").find(t).fadeIn(),e.preventDefault()}),o("ul.mvp-feat1-list-buts li a").on("click",function(e){e.preventDefault()}),o(".mvp-widget-tab-wrap").each(function(){o(this).find(".mvp-tab-col-cont").hide(),o(this).find("ul.mvp-feat1-list-buts li.mvp-feat-col-tab").addClass("active").show(),o(this).find(".mvp-tab-col-cont:first").show()}),o("ul.mvp-feat1-list-buts li").on("click",function(e){o(this).parents(".mvp-widget-tab-wrap").find("ul.mvp-feat1-list-buts li").removeClass("active"),o(this).addClass("active"),o(this).parents(".mvp-widget-tab-wrap").find(".mvp-tab-col-cont").hide();var t=o(this).find("a").attr("href");o(this).parents(".mvp-widget-tab-wrap").find(t).fadeIn(),e.preventDefault()}),o("ul.mvp-feat1-list-buts li a").on("click",function(e){e.preventDefault()})}),function(o,l,a){function i(e){this.console&&console.error(e)}l.fn.touchwipe=function(e){var n={min_move_x:20,min_move_y:20,wipeLeft:function(){},wipeRight:function(){},wipeUp:function(){},wipeDown:function(){},preventDefaultEvents:!0};return e&&l.extend(n,e),this.each(function(){var o,i,r=!1;function s(){this.removeEventListener("touchmove",t),o=null,r=!1}function t(e){var t;n.preventDefaultEvents&&e.preventDefault(),r&&(t=e.touches[0].pageX,e=e.touches[0].pageY,t=o-t,e=i-e,Math.abs(t)>=n.min_move_x?(s(),0<t?n.wipeLeft():n.wipeRight()):Math.abs(e)>=n.min_move_y&&(s(),0<e?n.wipeDown():n.wipeUp()))}"ontouchstart"in document.documentElement&&this.addEventListener("touchstart",function(e){1==e.touches.length&&(o=e.touches[0].pageX,i=e.touches[0].pageY,r=!0,this.addEventListener("touchmove",t,!1))},!1)}),this},l.elastislide=function(e,t){this.$el=l(t),this._init(e)},l.elastislide.defaults={speed:450,easing:"",imageW:190,margin:0,border:0,minItems:1,current:0,onClick:function(){return!1}},l.elastislide.prototype={_init:function(e){this.options=l.extend(!0,{},l.elastislide.defaults,e),this.$slider=this.$el.find("ul"),this.$items=this.$slider.children("li"),this.itemsCount=this.$items.length,this.$esCarousel=this.$slider.parent(),this._validateOptions(),this._configure(),this._addControls(),this._initEvents(),this.$slider.show(),this._slideToCurrent(!1)},_validateOptions:function(){this.options.speed<0&&(this.options.speed=450),this.options.margin<0&&(this.options.margin=4),this.options.border<0&&(this.options.border=1),(this.options.minItems<1||this.options.minItems>this.itemsCount)&&(this.options.minItems=1),this.options.current>this.itemsCount-1&&(this.options.current=0)},_configure:function(){this.current=this.options.current,this.visibleWidth=this.$esCarousel.width(),this.visibleWidth<this.options.minItems*(this.options.imageW+2*this.options.border)+(this.options.minItems-1)*this.options.margin?(this._setDim((this.visibleWidth-(this.options.minItems-1)*this.options.margin)/this.options.minItems),this._setCurrentValues(),this.fitCount=this.options.minItems):(this._setDim(),this._setCurrentValues()),this.$slider.css({width:this.sliderW})},_setDim:function(e){this.$items.css({marginRight:this.options.margin,width:e||this.options.imageW+2*this.options.border}).children("a").css({borderWidth:this.options.border})},_setCurrentValues:function(){this.itemW=this.$items.outerWidth(!0),this.sliderW=this.itemW*this.itemsCount,this.visibleWidth=this.$esCarousel.width(),this.fitCount=Math.floor(this.visibleWidth/this.itemW)},_addControls:function(){this.$navNext=l('<span class="es-nav-next"><a>&gt;</a></span>'),this.$navPrev=l('<span class="es-nav-prev"><a>&lt;</a></span>'),l('<div class="es-nav"/>').append(this.$navPrev).append(this.$navNext).appendTo(this.$el)},_toggleControls:function(e,t){e&&t?1===t?("right"===e?this.$navNext:this.$navPrev).show():("right"===e?this.$navNext:this.$navPrev).hide():(this.current===this.itemsCount-1||this.fitCount>=this.itemsCount)&&this.$navNext.hide()},_initEvents:function(){var t=this;l(o).bind("resize.elastislide",function(e){t._setCurrentValues(),t.visibleWidth<t.options.minItems*(t.options.imageW+2*t.options.border)+(t.options.minItems-1)*t.options.margin?(t._setDim((t.visibleWidth-(t.options.minItems-1)*t.options.margin)/t.options.minItems),t._setCurrentValues(),t.fitCount=t.options.minItems):(t._setDim(),t._setCurrentValues()),t.$slider.css({width:t.sliderW+10}),clearTimeout(t.resetTimeout),t.resetTimeout=setTimeout(function(){t._slideToCurrent()},200)}),this.$navNext.bind("click.elastislide",function(e){t._slide("right")}),this.$navPrev.bind("click.elastislide",function(e){t._slide("left")}),this.$items.bind("click.elastislide",function(e){t.options.onClick(l(this))}),t.$slider.touchwipe({wipeLeft:function(){t._slide("right")},wipeRight:function(){t._slide("left")}})},_slide:function(e,t,o,i){if(this.$slider.is(":animated"))return!1;var r=parseFloat(this.$slider.css("margin-left"));if(t===a){var s=this.fitCount*this.itemW;if(s<0)return!1;"right"===e&&this.sliderW-(Math.abs(r)+s)<this.visibleWidth?(s=this.sliderW-(Math.abs(r)+this.visibleWidth)-this.options.margin,this._toggleControls("right",-1),this._toggleControls("left",1)):"left"===e&&Math.abs(r)-s<0?(s=Math.abs(r),this._toggleControls("left",-1),this._toggleControls("right",1)):(0<(n="right"===e?Math.abs(r)+this.options.margin+Math.abs(s):Math.abs(r)-this.options.margin-Math.abs(s))?this._toggleControls("left",1):this._toggleControls("left",-1),n<this.sliderW-this.visibleWidth?this._toggleControls("right",1):this._toggleControls("right",-1)),t="right"===e?"-="+s:"+="+s}else{var n=Math.abs(t);Math.max(this.sliderW,this.visibleWidth)-n<this.visibleWidth&&(0!==(t=-(Math.max(this.sliderW,this.visibleWidth)-this.visibleWidth))&&(t+=this.options.margin),this._toggleControls("right",-1),n=Math.abs(t)),0<n?this._toggleControls("left",1):this._toggleControls("left",-1),Math.max(this.sliderW,this.visibleWidth)-this.visibleWidth>n+this.options.margin?this._toggleControls("right",1):this._toggleControls("right",-1)}l.fn.applyStyle=o===a?l.fn.animate:l.fn.css;t={marginLeft:t};this.$slider.applyStyle(t,l.extend(!0,[],{duration:this.options.speed,easing:this.options.easing,complete:function(){i&&i.call()}}))},_slideToCurrent:function(e){var t=this.current*this.itemW;this._slide("",-t,e)},add:function(e,t){this.$items=this.$items.add(e),this.itemsCount=this.$items.length,this._setDim(),this._setCurrentValues(),this.$slider.css({width:this.sliderW}),this._slideToCurrent(),t&&t.call(e)},destroy:function(e){this._destroy(e)},_destroy:function(e){this.$el.unbind(".elastislide").removeData("elastislide"),l(o).unbind(".elastislide"),e&&e.call()}},l.fn.elastislide=function(t){var o;return"string"==typeof t?(o=Array.prototype.slice.call(arguments,1),this.each(function(){var e=l.data(this,"elastislide");e?l.isFunction(e[t])&&"_"!==t.charAt(0)?e[t].apply(e,o):i("no such method '"+t+"' for elastislide instance"):i("cannot call methods on elastislide prior to initialization; attempted to call method '"+t+"'")})):this.each(function(){l.data(this,"elastislide")||l.data(this,"elastislide",new l.elastislide(t,this))}),this}}(window,jQuery),function(e){var t,g=!1,w=!1,v=5e3,c=2e3,b=0,y=e,x=0<(t=(t=document.getElementsByTagName("script"))[t.length-1].src.split("?")[0]).split("/").length?t.split("/").slice(0,-1).join("/")+"/":"",o=["ms","moz","webkit","o"],d=window.requestAnimationFrame||!1,h=window.cancelAnimationFrame||!1;if(!d)for(var i in o)var r=o[i],d=d||window[r+"RequestAnimationFrame"],h=h||(window[r+"CancelAnimationFrame"]||window[r+"CancelRequestAnimationFrame"]);function u(){if(n)return n;var i=document.createElement("DIV"),r={};r.haspointerlock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,r.isopera="opera"in window,r.isopera12=r.isopera&&"getUserMedia"in navigator,r.isoperamini="[object OperaMini]"===Object.prototype.toString.call(window.operamini),r.isie="all"in document&&"attachEvent"in i&&!r.isopera,r.isieold=r.isie&&!("msInterpolationMode"in i.style),r.isie7=r.isie&&!r.isieold&&(!("documentMode"in document)||7==document.documentMode),r.isie8=r.isie&&"documentMode"in document&&8==document.documentMode,r.isie9=r.isie&&"performance"in window&&9<=document.documentMode,r.isie10=r.isie&&"performance"in window&&10<=document.documentMode,r.isie9mobile=/iemobile.9/i.test(navigator.userAgent),r.isie9mobile&&(r.isie9=!1),r.isie7mobile=!r.isie9mobile&&r.isie7&&/iemobile/i.test(navigator.userAgent),r.ismozilla="MozAppearance"in i.style,r.iswebkit="WebkitAppearance"in i.style,r.ischrome="chrome"in window,r.ischrome22=r.ischrome&&r.haspointerlock,r.ischrome26=r.ischrome&&"transition"in i.style,r.cantouch="ontouchstart"in document.documentElement||"ontouchstart"in window,r.hasmstouch=window.navigator.msPointerEnabled||!1,r.ismac=/^mac$/i.test(navigator.platform),r.isios=r.cantouch&&/iphone|ipad|ipod/i.test(navigator.platform),r.isios4=r.isios&&!("seal"in Object),r.isandroid=/android/i.test(navigator.userAgent),r.trstyle=!1,r.hastransform=!1,r.hastranslate3d=!1,r.transitionstyle=!1,r.hastransition=!1,r.transitionend=!1;for(var e=["transform","msTransform","webkitTransform","MozTransform","OTransform"],t=0;t<e.length;t++)if(void 0!==i.style[e[t]]){r.trstyle=e[t];break}r.hastransform=0!=r.trstyle,r.hastransform&&(i.style[r.trstyle]="translate3d(1px,2px,3px)",r.hastranslate3d=/translate3d/.test(i.style[r.trstyle])),r.transitionstyle=!1,r.prefixstyle="",r.transitionend=!1;for(var e=["transition","webkitTransition","MozTransition","OTransition","OTransition","msTransition","KhtmlTransition"],o=["","-webkit-","-moz-","-o-","-o","-ms-","-khtml-"],s=["transitionend","webkitTransitionEnd","transitionend","otransitionend","oTransitionEnd","msTransitionEnd","KhtmlTransitionEnd"],t=0;t<e.length;t++)if(e[t]in i.style){r.transitionstyle=e[t],r.prefixstyle=o[t],r.transitionend=s[t];break}return r.ischrome26&&(r.prefixstyle=o[1]),r.hastransition=r.transitionstyle,r.cursorgrabvalue=function(){var e=["-moz-grab","-webkit-grab","grab"];(r.ischrome&&!r.ischrome22||r.isie)&&(e=[]);for(var t=0;t<e.length;t++){var o=e[t];if(i.style.cursor=o,i.style.cursor==o)return o}return"url(http://www.google.com/intl/en_ALL/mapfiles/openhand.cur),n-resize"}(),r.hasmousecapture="setCapture"in i,r.hasMutationObserver=!1!==S,i=null,n=r}function s(e,t){var m=this;if(this.version="3.5.0 BETA5",this.name="nicescroll",this.me=t,this.opt={doc:y("body"),win:!1},y.extend(this.opt,p),this.opt.snapbackspeed=80,e)for(var o in m.opt)void 0!==e[o]&&(m.opt[o]=e[o]);for(this.doc=m.opt.doc,this.iddoc=this.doc&&this.doc[0]&&this.doc[0].id||"",this.ispage=/BODY|HTML/.test((m.opt.win||this.doc)[0].nodeName),this.haswrapper=!1!==m.opt.win,this.win=m.opt.win||(this.ispage?y(window):this.doc),this.docscroll=this.ispage&&!this.haswrapper?y(window):this.win,this.body=y("body"),this.viewport=!1,this.isfixed=!1,this.iframe=!1,this.isiframe="IFRAME"==this.doc[0].nodeName&&"IFRAME"==this.win[0].nodeName,this.istextarea="TEXTAREA"==this.win[0].nodeName,this.forcescreen=!1,this.canshowonmouseevent="scroll"!=m.opt.autohidemode,this.onmousedown=!1,this.onmouseup=!1,this.onmousemove=!1,this.onmousewheel=!1,this.onkeypress=!1,this.ongesturezoom=!1,this.onclick=!1,this.onscrollstart=!1,this.onscrollend=!1,this.onscrollcancel=!1,this.onzoomin=!1,this.onzoomout=!1,this.view=!1,this.page=!1,this.scroll={x:0,y:0},this.scrollratio={x:0,y:0},this.cursorheight=20,this.scrollvaluemax=0,this.checkrtlmode=!1,this.scrollrunning=!1,this.scrollmom=!1,this.observer=!1,this.observerremover=!1;this.id="ascrail"+c++,document.getElementById(this.id););this.rail=!1,this.cursor=!1,this.cursorfreezed=!1,this.selectiondrag=!1,this.zoom=!1,this.zoomactive=!1,this.hasfocus=!1,this.hasmousefocus=!1,this.visibility=!0,this.locked=!1,this.hidden=!1,this.cursoractive=!0,this.overflowx=m.opt.overflowx,this.overflowy=m.opt.overflowy,this.nativescrollingarea=!1,this.checkarea=0,this.events=[],this.saved={},this.delaylist={},this.synclist={},this.lastdeltax=0,this.lastdeltay=0,this.detected=u();var f=y.extend({},this.detected);function i(){var e=m.doc.css(f.trstyle);return!(!e||"matrix"!=e.substr(0,6))&&e.replace(/^.*\((.*)\)$/g,"$1").replace(/px/g,"").split(/, +/)}this.canhwscroll=f.hastransform&&m.opt.hwacceleration,this.ishwscroll=this.canhwscroll&&m.haswrapper,this.istouchcapable=!1,f.cantouch&&f.ischrome&&!f.isios&&!f.isandroid&&(this.istouchcapable=!0,f.cantouch=!1),f.cantouch&&f.ismozilla&&!f.isios&&!f.isandroid&&(this.istouchcapable=!0,f.cantouch=!1),m.opt.enablemouselockapi||(f.hasmousecapture=!1,f.haspointerlock=!1),this.delayed=function(e,t,o,i){var r=m.delaylist[e],s=(new Date).getTime();if(!i&&r&&r.tt)return!1;r&&r.tt&&clearTimeout(r.tt),r&&r.last+o>s&&!r.tt?m.delaylist[e]={last:s+o,tt:setTimeout(function(){m.delaylist[e].tt=0,t.call()},o)}:r&&r.tt||(m.delaylist[e]={last:s,tt:0},setTimeout(function(){t.call()},0))},this.debounced=function(t,e,o){var i=m.delaylist[t];(new Date).getTime();m.delaylist[t]=e,i||setTimeout(function(){var e=m.delaylist[t];m.delaylist[t]=!1,e.call()},o)},this.synched=function(t,e){return m.synclist[t]=e,m.onsync||(d(function(){for(t in m.onsync=!1,m.synclist){var e=m.synclist[t];e&&e.call(m),m.synclist[t]=!1}}),m.onsync=!0),t},this.unsynched=function(e){m.synclist[e]&&(m.synclist[e]=!1)},this.css=function(e,t){for(var o in t)m.saved.css.push([e,o,e.css(o)]),e.css(o,t[o])},this.scrollTop=function(e){return void 0===e?m.getScrollTop():m.setScrollTop(e)},this.scrollLeft=function(e){return void 0===e?m.getScrollLeft():m.setScrollLeft(e)},BezierClass=function(e,t,o,i,r,s,n){this.st=e,this.ed=t,this.spd=o,this.p1=i||0,this.p2=r||1,this.p3=s||0,this.p4=n||1,this.ts=(new Date).getTime(),this.df=this.ed-this.st},BezierClass.prototype={B2:function(e){return 3*e*e*(1-e)},B3:function(e){return 3*e*(1-e)*(1-e)},B4:function(e){return(1-e)*(1-e)*(1-e)},getNow:function(){var e=1-((new Date).getTime()-this.ts)/this.spd,t=this.B2(e)+this.B3(e)+this.B4(e);return e<0?this.ed:this.st+Math.round(this.df*t)},update:function(e,t){return this.st=this.getNow(),this.ed=e,this.spd=t,this.ts=(new Date).getTime(),this.df=this.ed-this.st,this}},this.ishwscroll?(this.doc.translate={x:0,y:0,tx:"0px",ty:"0px"},f.hastranslate3d&&f.isios&&this.doc.css("-webkit-backface-visibility","hidden"),this.getScrollTop=function(e){if(!e){e=i();if(e)return 16==e.length?-e[13]:-e[5];if(m.timerscroll&&m.timerscroll.bz)return m.timerscroll.bz.getNow()}return m.doc.translate.y},this.getScrollLeft=function(e){if(!e){e=i();if(e)return 16==e.length?-e[12]:-e[4];if(m.timerscroll&&m.timerscroll.bh)return m.timerscroll.bh.getNow()}return m.doc.translate.x},document.createEvent?this.notifyScrollEvent=function(e){var t=document.createEvent("UIEvents");t.initUIEvent("scroll",!1,!0,window,1),e.dispatchEvent(t)}:document.fireEvent?this.notifyScrollEvent=function(e){var t=document.createEventObject();e.fireEvent("onscroll"),t.cancelBubble=!0}:this.notifyScrollEvent=function(e,t){},f.hastranslate3d&&m.opt.enabletranslate3d?(this.setScrollTop=function(e,t){m.doc.translate.y=e,m.doc.translate.ty=-1*e+"px",m.doc.css(f.trstyle,"translate3d("+m.doc.translate.tx+","+m.doc.translate.ty+",0px)"),t||m.notifyScrollEvent(m.win[0])},this.setScrollLeft=function(e,t){m.doc.translate.x=e,m.doc.translate.tx=-1*e+"px",m.doc.css(f.trstyle,"translate3d("+m.doc.translate.tx+","+m.doc.translate.ty+",0px)"),t||m.notifyScrollEvent(m.win[0])}):(this.setScrollTop=function(e,t){m.doc.translate.y=e,m.doc.translate.ty=-1*e+"px",m.doc.css(f.trstyle,"translate("+m.doc.translate.tx+","+m.doc.translate.ty+")"),t||m.notifyScrollEvent(m.win[0])},this.setScrollLeft=function(e,t){m.doc.translate.x=e,m.doc.translate.tx=-1*e+"px",m.doc.css(f.trstyle,"translate("+m.doc.translate.tx+","+m.doc.translate.ty+")"),t||m.notifyScrollEvent(m.win[0])})):(this.getScrollTop=function(){return m.docscroll.scrollTop()},this.setScrollTop=function(e){return m.docscroll.scrollTop(e)},this.getScrollLeft=function(){return m.docscroll.scrollLeft()},this.setScrollLeft=function(e){return m.docscroll.scrollLeft(e)}),this.getTarget=function(e){return e&&(e.target||e.srcElement)||!1},this.hasParent=function(e,t){if(!e)return!1;for(var o=e.target||e.srcElement||e||!1;o&&o.id!=t;)o=o.parentNode||!1;return!1!==o};var r={thin:1,medium:3,thick:5};function s(e,t,o){e=e.css(t),t=parseFloat(e);if(isNaN(t)){o=3==(t=r[e]||0)?o?m.win.outerHeight()-m.win.innerHeight():m.win.outerWidth()-m.win.innerWidth():1;return m.isie8&&t&&(t+=1),o?t:0}return t}function n(o,i,r,e){m._bind(o,i,function(e){var t={original:e=e||window.event,target:e.target||e.srcElement,type:"wheel",deltaMode:"MozMousePixelScroll"==e.type?0:1,deltaX:0,deltaZ:0,preventDefault:function(){return e.preventDefault?e.preventDefault():e.returnValue=!1,!1},stopImmediatePropagation:function(){e.stopImmediatePropagation?e.stopImmediatePropagation():e.cancelBubble=!0}};return"mousewheel"==i?(t.deltaY=-.025*e.wheelDelta,e.wheelDeltaX&&(t.deltaX=-.025*e.wheelDeltaX)):t.deltaY=e.detail,r.call(o,t)},e)}function l(e,t,o){var i,r;if(0==e.deltaMode?(i=-Math.floor(e.deltaX*(m.opt.mousescrollstep/54)),r=-Math.floor(e.deltaY*(m.opt.mousescrollstep/54))):1==e.deltaMode&&(i=-Math.floor(e.deltaX*m.opt.mousescrollstep),r=-Math.floor(e.deltaY*m.opt.mousescrollstep)),t&&m.opt.oneaxismousemode&&0==i&&r&&(i=r,r=0),i&&(m.scrollmom&&m.scrollmom.stop(),m.lastdeltax+=i,m.debounced("mousewheelx",function(){var e=m.lastdeltax;m.lastdeltax=0,m.rail.drag||m.doScrollLeftBy(e)},120)),r){if(m.opt.nativeparentscrolling&&o&&!m.ispage&&!m.zoomactive)if(r<0){if(m.getScrollTop()>=m.page.maxh)return!0}else if(m.getScrollTop()<=0)return!0;m.scrollmom&&m.scrollmom.stop(),m.lastdeltay+=r,m.debounced("mousewheely",function(){var e=m.lastdeltay;m.lastdeltay=0,m.rail.drag||m.doScrollBy(e)},120)}return e.stopImmediatePropagation(),e.preventDefault()}this.getOffset=function(){if(m.isfixed)return{top:parseFloat(m.win.css("top")),left:parseFloat(m.win.css("left"))};if(!m.viewport)return m.win.offset();var e=m.win.offset(),t=m.viewport.offset();return{top:e.top-t.top+m.viewport.scrollTop(),left:e.left-t.left+m.viewport.scrollLeft()}},this.updateScrollBar=function(e){var t,o,i;m.ishwscroll?(m.rail.css({height:m.win.innerHeight()}),m.railh&&m.railh.css({width:m.win.innerWidth()})):((i={top:(o=m.getOffset()).top,left:o.left}).top+=s(m.win,"border-top-width",!0),m.win.outerWidth(),m.win.innerWidth(),i.left+=m.rail.align?m.win.outerWidth()-s(m.win,"border-right-width")-m.rail.width:s(m.win,"border-left-width"),(t=m.opt.railoffset)&&(t.top&&(i.top+=t.top),m.rail.align&&t.left&&(i.left+=t.left)),m.locked||m.rail.css({top:i.top,left:i.left,height:e?e.h:m.win.innerHeight()}),m.zoom&&m.zoom.css({top:i.top+1,left:1==m.rail.align?i.left-20:i.left+m.rail.width+4}),m.railh&&!m.locked&&(i={top:o.top,left:o.left},o=m.railh.align?i.top+s(m.win,"border-top-width",!0)+m.win.innerHeight()-m.railh.height:i.top+s(m.win,"border-top-width",!0),i=i.left+s(m.win,"border-left-width"),m.railh.css({top:o,left:i,width:m.railh.width})))},this.doRailClick=function(e,t,o){var i,r;m.locked||(m.cancelEvent(e),t?(i=o?m.doScrollLeft:m.doScrollTop)(r=o?(e.pageX-m.railh.offset().left-m.cursorwidth/2)*m.scrollratio.x:(e.pageY-m.rail.offset().top-m.cursorheight/2)*m.scrollratio.y):(i=o?m.doScrollLeftBy:m.doScrollBy,r=o?m.scroll.x:m.scroll.y,e=o?e.pageX-m.railh.offset().left:e.pageY-m.rail.offset().top,o=o?m.view.w:m.view.h,i(e<=r?o:-o)))},m.hasanimationframe=d,m.hascancelanimationframe=h,m.hasanimationframe?m.hascancelanimationframe||(h=function(){m.cancelAnimationFrame=!0}):(d=function(e){return setTimeout(e,15-Math.floor(+new Date/1e3)%16)},h=clearInterval),this.init=function(){if(m.saved.css=[],f.isie7mobile)return!0;if(f.isoperamini)return!0;if(f.hasmstouch&&m.css(m.ispage?y("html"):m.win,{"-ms-touch-action":"none"}),m.zindex="auto",m.ispage||"auto"!=m.opt.zindex?m.zindex=m.opt.zindex:m.zindex=function(){var e=m.win;if("zIndex"in e)return e.zIndex();for(;0<e.length;){if(9==e[0].nodeType)return!1;var t=e.css("zIndex");if(!isNaN(t)&&0!=t)return parseInt(t);e=e.parent()}return!1}()||"auto",m.ispage||"auto"==m.zindex||m.zindex>b&&(b=m.zindex),m.isie&&0==m.zindex&&"auto"==m.opt.zindex&&(m.zindex="auto"),!m.ispage||!f.cantouch&&!f.isieold&&!f.isie9mobile){var e=m.docscroll;m.ispage&&(e=m.haswrapper?m.win:m.doc),f.isie9mobile||m.css(e,{"overflow-y":"hidden"}),m.ispage&&f.isie7&&("BODY"==m.doc[0].nodeName?m.css(y("html"),{"overflow-y":"hidden"}):"HTML"==m.doc[0].nodeName&&m.css(y("body"),{"overflow-y":"hidden"})),!f.isios||m.ispage||m.haswrapper||m.css(y("body"),{"-webkit-overflow-scrolling":"touch"});var t=y(document.createElement("div"));t.css({position:"relative",top:0,float:"right",width:m.opt.cursorwidth,height:"0px","background-color":m.opt.cursorcolor,border:m.opt.cursorborder,"background-clip":"padding-box","-webkit-border-radius":m.opt.cursorborderradius,"-moz-border-radius":m.opt.cursorborderradius,"border-radius":m.opt.cursorborderradius}),t.hborder=parseFloat(t.outerHeight()-t.innerHeight()),m.cursor=t;var o=y(document.createElement("div"));o.attr("id",m.id),o.addClass("nicescroll-rails");var i,r,s,n=["left","right"];for(s in n)r=n[s],(i=m.opt.railpadding[r])?o.css("padding-"+r,i+"px"):m.opt.railpadding[r]=0;o.append(t),o.width=Math.max(parseFloat(m.opt.cursorwidth),t.outerWidth())+m.opt.railpadding.left+m.opt.railpadding.right,o.css({width:o.width+"px",zIndex:m.zindex,background:m.opt.background,cursor:"default"}),o.visibility=!0,o.scrollable=!0,o.align="left"==m.opt.railalign?0:1,m.rail=o;var l,a,c,d,h,u=m.rail.drag=!1;!m.opt.boxzoom||m.ispage||f.isieold||(u=document.createElement("div"),m.bind(u,"click",m.doZoom),m.zoom=y(u),m.zoom.css({cursor:"pointer","z-index":m.zindex,backgroundImage:"url("+x+"zoomico.png)",height:18,width:18,backgroundPosition:"0px 0px"}),m.opt.dblclickzoom&&m.bind(m.win,"dblclick",m.doZoom),f.cantouch&&m.opt.gesturezoom&&(m.ongesturezoom=function(e){return 1.5<e.scale&&m.doZoomIn(e),e.scale<.8&&m.doZoomOut(e),m.cancelEvent(e)},m.bind(m.win,"gestureend",m.ongesturezoom))),m.railh=!1,m.opt.horizrailenabled&&(m.css(e,{"overflow-x":"hidden"}),(t=y(document.createElement("div"))).css({position:"relative",top:0,height:m.opt.cursorwidth,width:"0px","background-color":m.opt.cursorcolor,border:m.opt.cursorborder,"background-clip":"padding-box","-webkit-border-radius":m.opt.cursorborderradius,"-moz-border-radius":m.opt.cursorborderradius,"border-radius":m.opt.cursorborderradius}),t.wborder=parseFloat(t.outerWidth()-t.innerWidth()),m.cursorh=t,(a=y(document.createElement("div"))).attr("id",m.id+"-hr"),a.addClass("nicescroll-rails"),a.height=Math.max(parseFloat(m.opt.cursorwidth),t.outerHeight()),a.css({height:a.height+"px",zIndex:m.zindex,background:m.opt.background}),a.append(t),a.visibility=!0,a.scrollable=!0,a.align="top"==m.opt.railvalign?0:1,m.railh=a,m.railh.drag=!1),m.ispage?(o.css({position:"fixed",top:"0px",height:"100%"}),o.align?o.css({right:"0px"}):o.css({left:"0px"}),m.body.append(o),m.railh&&(a.css({position:"fixed",left:"0px",width:"100%"}),a.align?a.css({bottom:"0px"}):a.css({top:"0px"}),m.body.append(a))):(m.ishwscroll?("static"==m.win.css("position")&&m.css(m.win,{position:"relative"}),l="HTML"==m.win[0].nodeName?m.body:m.win,m.zoom&&(m.zoom.css({position:"absolute",top:1,right:0,"margin-right":o.width+4}),l.append(m.zoom)),o.css({position:"absolute",top:0}),o.align?o.css({right:0}):o.css({left:0}),l.append(o),a&&(a.css({position:"absolute",left:0,bottom:0}),a.align?a.css({bottom:0}):a.css({top:0}),l.append(a))):(m.isfixed="fixed"==m.win.css("position"),l=m.isfixed?"fixed":"absolute",m.isfixed||(m.viewport=m.getViewport(m.win[0])),m.viewport&&(m.body=m.viewport,0==/relative|absolute/.test(m.viewport.css("position"))&&m.css(m.viewport,{position:"relative"})),o.css({position:l}),m.zoom&&m.zoom.css({position:l}),m.updateScrollBar(),m.body.append(o),m.zoom&&m.body.append(m.zoom),m.railh&&(a.css({position:l}),m.body.append(a))),f.isios&&m.css(m.win,{"-webkit-tap-highlight-color":"rgba(0,0,0,0)","-webkit-touch-callout":"none"}),f.isie&&m.opt.disableoutline&&m.win.attr("hideFocus","true"),f.iswebkit&&m.opt.disableoutline&&m.win.css({outline:"none"})),!1===m.opt.autohidemode?(m.autohidedom=!1,m.rail.css({opacity:m.opt.cursoropacitymax}),m.railh&&m.railh.css({opacity:m.opt.cursoropacitymax})):!0===m.opt.autohidemode?(m.autohidedom=y().add(m.rail),f.isie8&&(m.autohidedom=m.autohidedom.add(m.cursor)),m.railh&&(m.autohidedom=m.autohidedom.add(m.railh)),m.railh&&f.isie8&&(m.autohidedom=m.autohidedom.add(m.cursorh))):"scroll"==m.opt.autohidemode?(m.autohidedom=y().add(m.rail),m.railh&&(m.autohidedom=m.autohidedom.add(m.railh))):"cursor"==m.opt.autohidemode?(m.autohidedom=y().add(m.cursor),m.railh&&(m.autohidedom=m.autohidedom.add(m.cursorh))):"hidden"==m.opt.autohidemode&&(m.autohidedom=!1,m.hide(),m.locked=!1),f.isie9mobile?(m.scrollmom=new z(m),m.onmangotouch=function(e){var t=m.getScrollTop(),o=m.getScrollLeft();if(t==m.scrollmom.lastscrolly&&o==m.scrollmom.lastscrollx)return!0;var i,r,s,n=t-m.mangotouch.sy,l=o-m.mangotouch.sx;0!=Math.round(Math.sqrt(Math.pow(l,2)+Math.pow(n,2)))&&(i=n<0?-1:1,r=l<0?-1:1,s=+new Date,m.mangotouch.lazy&&clearTimeout(m.mangotouch.lazy),80<s-m.mangotouch.tm||m.mangotouch.dry!=i||m.mangotouch.drx!=r?(m.scrollmom.stop(),m.scrollmom.reset(o,t),m.mangotouch.sy=t,m.mangotouch.ly=t,m.mangotouch.sx=o,m.mangotouch.lx=o,m.mangotouch.dry=i,m.mangotouch.drx=r,m.mangotouch.tm=s):(m.scrollmom.stop(),m.scrollmom.update(m.mangotouch.sx-l,m.mangotouch.sy-n),m.mangotouch.tm,m.mangotouch.tm=s,s=Math.max(Math.abs(m.mangotouch.ly-t),Math.abs(m.mangotouch.lx-o)),m.mangotouch.ly=t,m.mangotouch.lx=o,2<s&&(m.mangotouch.lazy=setTimeout(function(){m.mangotouch.lazy=!1,m.mangotouch.dry=0,m.mangotouch.drx=0,m.mangotouch.tm=0,m.scrollmom.doMomentum(30)},100))))},a=m.getScrollTop(),h=m.getScrollLeft(),m.mangotouch={sy:a,ly:a,dry:0,sx:h,lx:h,drx:0,lazy:!1,tm:0},m.bind(m.docscroll,"scroll",m.onmangotouch)):((f.cantouch||m.istouchcapable||m.opt.touchbehavior||f.hasmstouch)&&(m.scrollmom=new z(m),m.ontouchstart=function(e){if(e.pointerType&&2!=e.pointerType)return!1;if(!m.locked){if(f.hasmstouch)for(var t=e.target||!1;t;){var o=y(t).getNiceScroll();if(0<o.length&&o[0].me==m.me)break;if(0<o.length)return!1;if("DIV"==t.nodeName&&t.id==m.id)break;t=t.parentNode||!1}m.cancelScroll();var i,r,s,n,t=m.getTarget(e);if(t)if(/INPUT/i.test(t.nodeName)&&/range/i.test(t.type))return m.stopPropagation(e);if(!("clientX"in e)&&"changedTouches"in e&&(e.clientX=e.changedTouches[0].clientX,e.clientY=e.changedTouches[0].clientY),m.forcescreen&&((e={original:(r=e).original||e}).clientX=r.screenX,e.clientY=r.screenY),m.rail.drag={x:e.clientX,y:e.clientY,sx:m.scroll.x,sy:m.scroll.y,st:m.getScrollTop(),sl:m.getScrollLeft(),pt:2,dl:!1},m.ispage||!m.opt.directionlockdeadzone?m.rail.drag.dl="f":(n=y(window).width(),s=y(window).height(),i=Math.max(document.body.scrollWidth,document.documentElement.scrollWidth),r=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight),s=Math.max(0,r-s),n=Math.max(0,i-n),!m.rail.scrollable&&m.railh.scrollable?m.rail.drag.ck=0<s&&"v":m.rail.scrollable&&!m.railh.scrollable?m.rail.drag.ck=0<n&&"h":m.rail.drag.ck=!1,m.rail.drag.ck||(m.rail.drag.dl="f")),m.opt.touchbehavior&&m.isiframe&&f.isie&&(n=m.win.position(),m.rail.drag.x+=n.left,m.rail.drag.y+=n.top),m.hasmoving=!1,m.lastmouseup=!1,m.scrollmom.reset(e.clientX,e.clientY),!f.cantouch&&!this.istouchcapable&&!f.hasmstouch){if(!(!!t&&/INPUT|SELECT|TEXTAREA/i.test(t.nodeName)))return!m.ispage&&f.hasmousecapture&&t.setCapture(),m.opt.touchbehavior?m.cancelEvent(e):m.stopPropagation(e);/SUBMIT|CANCEL|BUTTON/i.test(y(t).attr("type"))&&(pc={tg:t,click:!1},m.preventclick=pc)}}},m.ontouchend=function(e){return(!e.pointerType||2==e.pointerType)&&(m.rail.drag&&2==m.rail.drag.pt&&(m.scrollmom.doMomentum(),m.rail.drag=!1,m.hasmoving&&(m.hasmoving=!1,m.lastmouseup=!0,m.hideCursor(),f.hasmousecapture&&document.releaseCapture(),!f.cantouch))?m.cancelEvent(e):void 0)},c=m.opt.touchbehavior&&m.isiframe&&!f.hasmousecapture,m.ontouchmove=function(e,t){if(e.pointerType&&2!=e.pointerType)return!1;if(m.rail.drag&&2==m.rail.drag.pt){if(f.cantouch&&void 0===e.original)return!0;m.hasmoving=!0,m.preventclick&&!m.preventclick.click&&(m.preventclick.click=m.preventclick.tg.onclick||!1,m.preventclick.tg.onclick=m.onpreventclick),"changedTouches"in(e=y.extend({original:e},e))&&(e.clientX=e.changedTouches[0].clientX,e.clientY=e.changedTouches[0].clientY),m.forcescreen&&((e={original:(s=e).original||e}).clientX=s.screenX,e.clientY=s.screenY);var o=ofy=0;c&&!t&&(o=-(a=m.win.position()).left,ofy=-a.top);var i,r=e.clientY+ofy,s=r-m.rail.drag.y,n=e.clientX+o,t=n-m.rail.drag.x,l=m.rail.drag.st-s;m.ishwscroll&&m.opt.bouncescroll?l<0?l=Math.round(l/2):l>m.page.maxh&&(l=m.page.maxh+Math.round((l-m.page.maxh)/2)):(l<0&&(r=l=0),l>m.page.maxh&&(l=m.page.maxh,r=0)),m.railh&&m.railh.scrollable&&(i=m.rail.drag.sl-t,m.ishwscroll&&m.opt.bouncescroll?i<0?i=Math.round(i/2):i>m.page.maxw&&(i=m.page.maxw+Math.round((i-m.page.maxw)/2)):(i<0&&(n=i=0),i>m.page.maxw&&(i=m.page.maxw,n=0)));var a=!1;if(m.rail.drag.dl)a=!0,"v"==m.rail.drag.dl?i=m.rail.drag.sl:"h"==m.rail.drag.dl&&(l=m.rail.drag.st);else{o=Math.abs(s),s=Math.abs(t),t=m.opt.directionlockdeadzone;if("v"==m.rail.drag.ck){if(t<o&&s<=.3*o)return!(m.rail.drag=!1);t<s&&(m.rail.drag.dl="f",y("body").scrollTop(y("body").scrollTop()))}else if("h"==m.rail.drag.ck){if(t<s&&o<=.3*s)return!(m.rail.drag=!1);t<o&&(m.rail.drag.dl="f",y("body").scrollLeft(y("body").scrollLeft()))}}return m.synched("touchmove",function(){m.rail.drag&&2==m.rail.drag.pt&&(m.prepareTransition&&m.prepareTransition(0),m.rail.scrollable&&m.setScrollTop(l),m.scrollmom.update(n,r),m.railh&&m.railh.scrollable?(m.setScrollLeft(i),m.showCursor(l,i)):m.showCursor(l),f.isie10&&document.selection.clear())}),f.ischrome&&m.istouchcapable&&(a=!1),a?m.cancelEvent(e):void 0}}),m.onmousedown=function(e,t){if(!m.rail.drag||1==m.rail.drag.pt){if(m.locked)return m.cancelEvent(e);m.cancelScroll(),m.rail.drag={x:e.clientX,y:e.clientY,sx:m.scroll.x,sy:m.scroll.y,pt:1,hr:!!t};t=m.getTarget(e);return!m.ispage&&f.hasmousecapture&&t.setCapture(),m.isiframe&&!f.hasmousecapture&&(m.saved.csspointerevents=m.doc.css("pointer-events"),m.css(m.doc,{"pointer-events":"none"})),m.cancelEvent(e)}},m.onmouseup=function(e){if(m.rail.drag&&(f.hasmousecapture&&document.releaseCapture(),m.isiframe&&!f.hasmousecapture&&m.doc.css("pointer-events",m.saved.csspointerevents),1==m.rail.drag.pt))return m.rail.drag=!1,m.cancelEvent(e)},m.onmousemove=function(e){var t;if(m.rail.drag&&1==m.rail.drag.pt)return f.ischrome&&0==e.which?m.onmouseup(e):(m.cursorfreezed=!0,m.rail.drag.hr?(m.scroll.x=m.rail.drag.sx+(e.clientX-m.rail.drag.x),m.scroll.x<0&&(m.scroll.x=0),t=m.scrollvaluemaxw,m.scroll.x>t&&(m.scroll.x=t)):(m.scroll.y=m.rail.drag.sy+(e.clientY-m.rail.drag.y),m.scroll.y<0&&(m.scroll.y=0),t=m.scrollvaluemax,m.scroll.y>t&&(m.scroll.y=t)),m.synched("mousemove",function(){m.rail.drag&&1==m.rail.drag.pt&&(m.showCursor(),m.rail.drag.hr?m.doScrollLeft(Math.round(m.scroll.x*m.scrollratio.x),m.opt.cursordragspeed):m.doScrollTop(Math.round(m.scroll.y*m.scrollratio.y),m.opt.cursordragspeed))}),m.cancelEvent(e))},f.cantouch||m.opt.touchbehavior?(m.onpreventclick=function(e){if(m.preventclick)return m.preventclick.tg.onclick=m.preventclick.click,m.preventclick=!1,m.cancelEvent(e)},m.bind(m.win,"mousedown",m.ontouchstart),m.onclick=!f.isios&&function(e){return!m.lastmouseup||(m.lastmouseup=!1,m.cancelEvent(e))},m.opt.grabcursorenabled&&f.cursorgrabvalue&&(m.css(m.ispage?m.doc:m.win,{cursor:f.cursorgrabvalue}),m.css(m.rail,{cursor:f.cursorgrabvalue}))):("getSelection"in document?m.hasTextSelected=function(){return 0<document.getSelection().rangeCount}:"selection"in document?m.hasTextSelected=function(){return"None"!=document.selection.type}:m.hasTextSelected=function(){return!1},m.onselectionstart=function(e){m.ispage||(m.selectiondrag=m.win.offset())},m.onselectionend=function(e){m.selectiondrag=!1},m.onselectiondrag=function(e){m.selectiondrag&&m.hasTextSelected()&&m.debounced("selectionscroll",function(){!function e(t){var o,i;m.selectiondrag&&(t&&(o=m.win.outerHeight(),0<(i=t.pageY-m.selectiondrag.top)&&i<o&&(i=0),o<=i&&(i-=o),m.selectiondrag.df=i),0!=m.selectiondrag.df&&(i=2*-Math.floor(m.selectiondrag.df/6),m.doScrollBy(i),m.debounced("doselectionscroll",function(){e()},50)))}(e)},250)}),f.hasmstouch&&(m.css(m.rail,{"-ms-touch-action":"none"}),m.css(m.cursor,{"-ms-touch-action":"none"}),m.bind(m.win,"MSPointerDown",m.ontouchstart),m.bind(document,"MSPointerUp",m.ontouchend),m.bind(document,"MSPointerMove",m.ontouchmove),m.bind(m.cursor,"MSGestureHold",function(e){e.preventDefault()}),m.bind(m.cursor,"contextmenu",function(e){e.preventDefault()})),this.istouchcapable&&(m.bind(m.win,"touchstart",m.ontouchstart),m.bind(document,"touchend",m.ontouchend),m.bind(document,"touchcancel",m.ontouchend),m.bind(document,"touchmove",m.ontouchmove)),m.bind(m.cursor,"mousedown",m.onmousedown),m.bind(m.cursor,"mouseup",m.onmouseup),m.railh&&(m.bind(m.cursorh,"mousedown",function(e){m.onmousedown(e,!0)}),m.bind(m.cursorh,"mouseup",function(e){if(!m.rail.drag||2!=m.rail.drag.pt)return m.rail.drag=!1,m.hasmoving=!1,m.hideCursor(),f.hasmousecapture&&document.releaseCapture(),m.cancelEvent(e)})),!m.opt.cursordragontouch&&(f.cantouch||m.opt.touchbehavior)||(m.rail.css({cursor:"default"}),m.railh&&m.railh.css({cursor:"default"}),m.jqbind(m.rail,"mouseenter",function(){m.canshowonmouseevent&&m.showCursor(),m.rail.active=!0}),m.jqbind(m.rail,"mouseleave",function(){m.rail.active=!1,m.rail.drag||m.hideCursor()}),m.opt.sensitiverail&&(m.bind(m.rail,"click",function(e){m.doRailClick(e,!1,!1)}),m.bind(m.rail,"dblclick",function(e){m.doRailClick(e,!0,!1)}),m.bind(m.cursor,"click",function(e){m.cancelEvent(e)}),m.bind(m.cursor,"dblclick",function(e){m.cancelEvent(e)})),m.railh&&(m.jqbind(m.railh,"mouseenter",function(){m.canshowonmouseevent&&m.showCursor(),m.rail.active=!0}),m.jqbind(m.railh,"mouseleave",function(){m.rail.active=!1,m.rail.drag||m.hideCursor()}),m.opt.sensitiverail&&(m.bind(m.railh,"click",function(e){m.doRailClick(e,!1,!0)}),m.bind(m.railh,"dblclick",function(e){m.doRailClick(e,!0,!0)}),m.bind(m.cursorh,"click",function(e){m.cancelEvent(e)}),m.bind(m.cursorh,"dblclick",function(e){m.cancelEvent(e)})))),f.cantouch||m.opt.touchbehavior?(m.bind(f.hasmousecapture?m.win:document,"mouseup",m.ontouchend),m.bind(document,"mousemove",m.ontouchmove),m.onclick&&m.bind(document,"click",m.onclick),m.opt.cursordragontouch&&(m.bind(m.cursor,"mousedown",m.onmousedown),m.bind(m.cursor,"mousemove",m.onmousemove),m.cursorh&&m.bind(m.cursorh,"mousedown",m.onmousedown),m.cursorh&&m.bind(m.cursorh,"mousemove",m.onmousemove))):(m.bind(f.hasmousecapture?m.win:document,"mouseup",m.onmouseup),m.bind(document,"mousemove",m.onmousemove),m.onclick&&m.bind(document,"click",m.onclick),!m.ispage&&m.opt.enablescrollonselection&&(m.bind(m.win[0],"mousedown",m.onselectionstart),m.bind(document,"mouseup",m.onselectionend),m.bind(m.cursor,"mouseup",m.onselectionend),m.cursorh&&m.bind(m.cursorh,"mouseup",m.onselectionend),m.bind(document,"mousemove",m.onselectiondrag)),m.zoom&&(m.jqbind(m.zoom,"mouseenter",function(){m.canshowonmouseevent&&m.showCursor(),m.rail.active=!0}),m.jqbind(m.zoom,"mouseleave",function(){m.rail.active=!1,m.rail.drag||m.hideCursor()}))),m.opt.enablemousewheel&&(m.isiframe||m.bind(f.isie&&m.ispage?document:m.win,"mousewheel",m.onmousewheel),m.bind(m.rail,"mousewheel",m.onmousewheel),m.railh&&m.bind(m.railh,"mousewheel",m.onmousewheelhr)),m.ispage||f.cantouch||/HTML|BODY/.test(m.win[0].nodeName)||(m.win.attr("tabindex")||m.win.attr({tabindex:v++}),m.jqbind(m.win,"focus",function(e){g=m.getTarget(e).id||!0,m.hasfocus=!0,m.canshowonmouseevent&&m.noticeCursor()}),m.jqbind(m.win,"blur",function(e){g=!1,m.hasfocus=!1}),m.jqbind(m.win,"mouseenter",function(e){w=m.getTarget(e).id||!0,m.hasmousefocus=!0,m.canshowonmouseevent&&m.noticeCursor()}),m.jqbind(m.win,"mouseleave",function(){w=!1,m.hasmousefocus=!1}))),m.onkeypress=function(e){if(m.locked&&0==m.page.maxh)return!0;e=e||window.e;var t=m.getTarget(e);if(t&&/INPUT|TEXTAREA|SELECT|OPTION/.test(t.nodeName)&&(!(t.getAttribute("type")||t.type||!1)||!/submit|button|cancel/i.tp))return!0;if(m.hasfocus||m.hasmousefocus&&!g||m.ispage&&!g&&!w){t=e.keyCode;if(m.locked&&27!=t)return m.cancelEvent(e);var o=e.ctrlKey||!1,i=e.shiftKey||!1,r=!1;switch(t){case 38:case 63233:m.doScrollBy(72),r=!0;break;case 40:case 63235:m.doScrollBy(-72),r=!0;break;case 37:case 63232:m.railh&&(o?m.doScrollLeft(0):m.doScrollLeftBy(72),r=!0);break;case 39:case 63234:m.railh&&(o?m.doScrollLeft(m.page.maxw):m.doScrollLeftBy(-72),r=!0);break;case 33:case 63276:m.doScrollBy(m.view.h),r=!0;break;case 34:case 63277:m.doScrollBy(-m.view.h),r=!0;break;case 36:case 63273:m.railh&&o?m.doScrollPos(0,0):m.doScrollTo(0),r=!0;break;case 35:case 63275:m.railh&&o?m.doScrollPos(m.page.maxw,m.page.maxh):m.doScrollTo(m.page.maxh),r=!0;break;case 32:m.opt.spacebarenabled&&(i?m.doScrollBy(m.view.h):m.doScrollBy(-m.view.h),r=!0);break;case 27:m.zoomactive&&(m.doZoom(),r=!0)}return r?m.cancelEvent(e):void 0}},m.opt.enablekeyboard&&m.bind(document,f.isopera&&!f.isopera12?"keypress":"keydown",m.onkeypress),m.bind(window,"resize",m.lazyResize),m.bind(window,"orientationchange",m.lazyResize),m.bind(window,"load",m.lazyResize),!f.ischrome||m.ispage||m.haswrapper||(d=m.win.attr("style"),h=parseFloat(m.win.css("width"))+1,m.win.css("width",h),m.synched("chromefix",function(){m.win.attr("style",d)})),m.onAttributeChange=function(e){m.lazyResize(250)},m.ispage||m.haswrapper||(!1!==S?(m.observer=new S(function(e){e.forEach(m.onAttributeChange)}),m.observer.observe(m.win[0],{childList:!0,characterData:!1,attributes:!0,subtree:!1}),m.observerremover=new S(function(e){e.forEach(function(e){if(0<e.removedNodes.length)for(var t in e.removedNodes)if(e.removedNodes[t]==m.win[0])return m.remove()})}),m.observerremover.observe(m.win[0].parentNode,{childList:!0,characterData:!1,attributes:!1,subtree:!1})):(m.bind(m.win,f.isie&&!f.isie9?"propertychange":"DOMAttrModified",m.onAttributeChange),f.isie9&&m.win[0].attachEvent("onpropertychange",m.onAttributeChange),m.bind(m.win,"DOMNodeRemoved",function(e){e.target==m.win[0]&&m.remove()}))),!m.ispage&&m.opt.boxzoom&&m.bind(window,"resize",m.resizeZoom),m.istextarea&&m.bind(m.win,"mouseup",m.lazyResize),m.checkrtlmode=!0,m.lazyResize(30)}function p(e){m.iframexd=!1;try{var t="contentDocument"in this?this.contentDocument:this.contentWindow.document;t.domain}catch(e){t=!(m.iframexd=!0)}if(m.iframexd)return"console"in window&&console.log("NiceScroll error: policy restriced iframe"),!0;var o;m.forcescreen=!0,m.isiframe&&(m.iframe={doc:y(t),html:m.doc.contents().find("html")[0],body:m.doc.contents().find("body")[0]},m.getContentSize=function(){return{w:Math.max(m.iframe.html.scrollWidth,m.iframe.body.scrollWidth),h:Math.max(m.iframe.html.scrollHeight,m.iframe.body.scrollHeight)}},m.docscroll=y(m.iframe.body)),f.isios||!m.opt.iframeautoresize||m.isiframe||(m.win.scrollTop(0),m.doc.height(""),o=Math.max(t.getElementsByTagName("html")[0].scrollHeight,t.body.scrollHeight),m.doc.height(o)),m.lazyResize(30),f.isie7&&m.css(y(m.iframe.html),{"overflow-y":"hidden"}),m.css(y(m.iframe.body),{"overflow-y":"hidden"}),f.isios&&m.haswrapper&&(m.css(y(t.body),{"-webkit-transform":"translate3d(0,0,0)"}),console.log(1)),"contentWindow"in this?m.bind(this.contentWindow,"scroll",m.onscroll):m.bind(t,"scroll",m.onscroll),m.opt.enablemousewheel&&m.bind(t,"mousewheel",m.onmousewheel),m.opt.enablekeyboard&&m.bind(t,f.isopera?"keypress":"keydown",m.onkeypress),(f.cantouch||m.opt.touchbehavior)&&(m.bind(t,"mousedown",m.ontouchstart),m.bind(t,"mousemove",function(e){m.ontouchmove(e,!0)}),m.opt.grabcursorenabled&&f.cursorgrabvalue&&m.css(y(t.body),{cursor:f.cursorgrabvalue})),m.bind(t,"mouseup",m.ontouchend),m.zoom&&(m.opt.dblclickzoom&&m.bind(t,"dblclick",m.doZoom),m.ongesturezoom&&m.bind(t,"gestureend",m.ongesturezoom))}"IFRAME"==this.doc[0].nodeName&&(this.doc[0].readyState&&"complete"==this.doc[0].readyState&&setTimeout(function(){p.call(m.doc[0],!1)},500),m.bind(this.doc,"load",p))},this.showCursor=function(e,t){m.cursortimeout&&(clearTimeout(m.cursortimeout),m.cursortimeout=0),m.rail&&(m.autohidedom&&(m.autohidedom.stop().css({opacity:m.opt.cursoropacitymax}),m.cursoractive=!0),m.rail.drag&&1==m.rail.drag.pt||(void 0!==e&&!1!==e&&(m.scroll.y=Math.round(+e/m.scrollratio.y)),void 0!==t&&(m.scroll.x=Math.round(+t/m.scrollratio.x))),m.cursor.css({height:m.cursorheight,top:m.scroll.y}),m.cursorh&&(!m.rail.align&&m.rail.visibility?m.cursorh.css({width:m.cursorwidth,left:m.scroll.x+m.rail.width}):m.cursorh.css({width:m.cursorwidth,left:m.scroll.x}),m.cursoractive=!0),m.zoom&&m.zoom.stop().css({opacity:m.opt.cursoropacitymax}))},this.hideCursor=function(e){m.cursortimeout||m.rail&&m.autohidedom&&(m.cursortimeout=setTimeout(function(){m.rail.active&&m.showonmouseevent||(m.autohidedom.stop().animate({opacity:m.opt.cursoropacitymin}),m.zoom&&m.zoom.stop().animate({opacity:m.opt.cursoropacitymin}),m.cursoractive=!1),m.cursortimeout=0},e||m.opt.hidecursordelay))},this.noticeCursor=function(e,t,o){m.showCursor(t,o),m.rail.active||m.hideCursor(e)},this.getContentSize=m.ispage?function(){return{w:Math.max(document.body.scrollWidth,document.documentElement.scrollWidth),h:Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)}}:m.haswrapper?function(){return{w:m.doc.outerWidth()+parseInt(m.win.css("paddingLeft"))+parseInt(m.win.css("paddingRight")),h:m.doc.outerHeight()+parseInt(m.win.css("paddingTop"))+parseInt(m.win.css("paddingBottom"))}}:function(){return{w:m.docscroll[0].scrollWidth,h:m.docscroll[0].scrollHeight}},this.onResize=function(e,t){if(!m.win)return!1;if(!m.haswrapper&&!m.ispage){if("none"==m.win.css("display"))return m.visibility&&m.hideRail().hideRailHr(),!1;m.hidden||m.visibility||m.showRail().showRailHr()}var o=m.page.maxh,i=m.page.maxw,r=(m.view.h,m.view.w);if(m.view={w:m.ispage?m.win.width():parseInt(m.win[0].clientWidth),h:m.ispage?m.win.height():parseInt(m.win[0].clientHeight)},m.page=t||m.getContentSize(),m.page.maxh=Math.max(0,m.page.h-m.view.h),m.page.maxw=Math.max(0,m.page.w-m.view.w),m.page.maxh==o&&m.page.maxw==i&&m.view.w==r){if(m.ispage)return m;i=m.win.offset();if(m.lastposition){r=m.lastposition;if(r.top==i.top&&r.left==i.left)return m}m.lastposition=i}return 0==m.page.maxh?(m.hideRail(),m.scrollvaluemax=0,m.scroll.y=0,m.scrollratio.y=0,m.cursorheight=0,m.setScrollTop(0),m.rail.scrollable=!1):m.rail.scrollable=!0,0==m.page.maxw?(m.hideRailHr(),m.scrollvaluemaxw=0,m.scroll.x=0,m.scrollratio.x=0,m.cursorwidth=0,m.setScrollLeft(0),m.railh.scrollable=!1):m.railh.scrollable=!0,m.locked=0==m.page.maxh&&0==m.page.maxw,m.locked?(m.ispage||m.updateScrollBar(m.view),!1):(m.hidden||m.visibility?m.hidden||m.railh.visibility||m.showRailHr():m.showRail().showRailHr(),m.istextarea&&m.win.css("resize")&&"none"!=m.win.css("resize")&&(m.view.h-=20),m.cursorheight=Math.min(m.view.h,Math.round(m.view.h*(m.view.h/m.page.h))),m.cursorheight=m.opt.cursorfixedheight||Math.max(m.opt.cursorminheight,m.cursorheight),m.cursorwidth=Math.min(m.view.w,Math.round(m.view.w*(m.view.w/m.page.w))),m.cursorwidth=m.opt.cursorfixedheight||Math.max(m.opt.cursorminheight,m.cursorwidth),m.scrollvaluemax=m.view.h-m.cursorheight-m.cursor.hborder,m.railh&&(m.railh.width=0<m.page.maxh?m.view.w-m.rail.width:m.view.w,m.scrollvaluemaxw=m.railh.width-m.cursorwidth-m.cursorh.wborder),m.checkrtlmode&&m.railh&&(m.checkrtlmode=!1,m.opt.rtlmode&&0==m.scroll.x&&m.setScrollLeft(m.page.maxw)),m.ispage||m.updateScrollBar(m.view),m.scrollratio={x:m.page.maxw/m.scrollvaluemaxw,y:m.page.maxh/m.scrollvaluemax},m.getScrollTop()>m.page.maxh?m.doScrollTop(m.page.maxh):(m.scroll.y=Math.round(m.getScrollTop()*(1/m.scrollratio.y)),m.scroll.x=Math.round(m.getScrollLeft()*(1/m.scrollratio.x)),m.cursoractive&&m.noticeCursor()),m.scroll.y&&0==m.getScrollTop()&&m.doScrollTo(Math.floor(m.scroll.y*m.scrollratio.y)),m)},this.resize=m.onResize,this.lazyResize=function(e){return e=isNaN(e)?30:e,m.delayed("resize",m.resize,e),m},this._bind=function(e,t,o,i){m.events.push({e:e,n:t,f:o,b:i,q:!1}),e.addEventListener?e.addEventListener(t,o,i||!1):e.attachEvent?e.attachEvent("on"+t,o):e["on"+t]=o},this.jqbind=function(e,t,o){m.events.push({e:e,n:t,f:o,q:!0}),y(e).bind(t,o)},this.bind=function(e,t,o,i){var r,s="jquery"in e?e[0]:e;"mousewheel"==t?"onwheel"in m.win?m._bind(s,"wheel",o,i||!1):(r=void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll",n(s,r,o,i||!1),"DOMMouseScroll"==r&&n(s,"MozMousePixelScroll",o,i||!1)):s.addEventListener?(f.cantouch&&/mouseup|mousedown|mousemove/.test(t)&&(r="mousedown"==t?"touchstart":"mouseup"==t?"touchend":"touchmove",m._bind(s,r,function(e){var t;e.touches?e.touches.length<2&&((t=e.touches.length?e.touches[0]:e).original=e,o.call(this,t)):e.changedTouches&&((t=e.changedTouches[0]).original=e,o.call(this,t))},i||!1)),m._bind(s,t,o,i||!1),f.cantouch&&"mouseup"==t&&m._bind(s,"touchcancel",o,i||!1)):m._bind(s,t,function(e){return(e=e||window.event||!1)&&e.srcElement&&(e.target=e.srcElement),"pageY"in e||(e.pageX=e.clientX+document.documentElement.scrollLeft,e.pageY=e.clientY+document.documentElement.scrollTop),!1!==o.call(s,e)&&!1!==i||m.cancelEvent(e)})},this._unbind=function(e,t,o,i){e.removeEventListener?e.removeEventListener(t,o,i):e.detachEvent?e.detachEvent("on"+t,o):e["on"+t]=!1},this.unbindAll=function(){for(var e=0;e<m.events.length;e++){var t=m.events[e];t.q?t.e.unbind(t.n,t.f):m._unbind(t.e,t.n,t.f,t.b)}},this.cancelEvent=function(e){return!!(e=e.original||e||window.event||!1)&&(e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.preventManipulation&&e.preventManipulation(),e.cancelBubble=!0,e.cancel=!0,e.returnValue=!1)},this.stopPropagation=function(e){return!!(e=e.original||e||window.event||!1)&&(e.stopPropagation?e.stopPropagation():(e.cancelBubble&&(e.cancelBubble=!0),!1))},this.showRail=function(){return 0==m.page.maxh||!m.ispage&&"none"==m.win.css("display")||(m.visibility=!0,m.rail.visibility=!0,m.rail.css("display","block")),m},this.showRailHr=function(){return m.railh&&(0==m.page.maxw||!m.ispage&&"none"==m.win.css("display")||(m.railh.visibility=!0,m.railh.css("display","block"))),m},this.hideRail=function(){return m.visibility=!1,m.rail.visibility=!1,m.rail.css("display","none"),m},this.hideRailHr=function(){return m.railh&&(m.railh.visibility=!1,m.railh.css("display","none")),m},this.show=function(){return m.hidden=!1,m.locked=!1,m.showRail().showRailHr()},this.hide=function(){return m.hidden=!0,m.locked=!0,m.hideRail().hideRailHr()},this.toggle=function(){return m.hidden?m.show():m.hide()},this.remove=function(){m.stop(),m.cursortimeout&&clearTimeout(m.cursortimeout),m.doZoomOut(),m.unbindAll(),f.isie9&&m.win[0].detachEvent("onpropertychange",m.onAttributeChange),!1!==m.observer&&m.observer.disconnect(),!1!==m.observerremover&&m.observerremover.disconnect(),m.events=null,m.cursor&&m.cursor.remove(),m.cursorh&&m.cursorh.remove(),m.rail&&m.rail.remove(),m.railh&&m.railh.remove(),m.zoom&&m.zoom.remove();for(var e=0;e<m.saved.css.length;e++){var t=m.saved.css[e];t[0].css(t[1],void 0===t[2]?"":t[2])}m.saved=!1,m.me.data("__nicescroll","");var o,i=y.nicescroll;for(o in i.each(function(e){if(this&&this.id===m.id){delete i[e];for(var t=++e;t<i.length;t++,e++)i[e]=i[t];i.length--,i.length&&delete i[i.length]}}),m)m[o]=null,delete m[o];m=null},this.scrollstart=function(e){return this.onscrollstart=e,m},this.scrollend=function(e){return this.onscrollend=e,m},this.scrollcancel=function(e){return this.onscrollcancel=e,m},this.zoomin=function(e){return this.onzoomin=e,m},this.zoomout=function(e){return this.onzoomout=e,m},this.isScrollable=function(e){var t=e.target||e;if("OPTION"==t.nodeName)return!0;for(;t&&1==t.nodeType&&!/BODY|HTML/.test(t.nodeName);){var o=y(t),o=o.css("overflowY")||o.css("overflowX")||o.css("overflow")||"";if(/scroll|auto/.test(o))return t.clientHeight!=t.scrollHeight;t=t.parentNode||!1}return!1},this.getViewport=function(e){for(var t=!(!e||!e.parentNode)&&e.parentNode;t&&1==t.nodeType&&!/BODY|HTML/.test(t.nodeName);){var o=y(t),i=o.css("overflowY")||o.css("overflowX")||o.css("overflow")||"";if(/scroll|auto/.test(i)&&t.clientHeight!=t.scrollHeight)return o;if(0<o.getNiceScroll().length)return o;t=t.parentNode||!1}return!1},this.onmousewheel=function(e){if(m.locked)return m.debounced("checkunlock",m.resize,250),!0;if(m.rail.drag)return m.cancelEvent(e);if("auto"==m.opt.oneaxismousemode&&0!=e.deltaX&&(m.opt.oneaxismousemode=!1),m.opt.oneaxismousemode&&0==e.deltaX&&!m.rail.scrollable)return!m.railh||!m.railh.scrollable||m.onmousewheelhr(e);var t=+new Date,o=!1;if(m.opt.preservenativescrolling&&m.checkarea+600<t&&(m.nativescrollingarea=m.isScrollable(e),o=!0),m.checkarea=t,m.nativescrollingarea)return!0;o=l(e,!1,o);return o&&(m.checkarea=0),o},this.onmousewheelhr=function(e){if(m.locked||!m.railh.scrollable)return!0;if(m.rail.drag)return m.cancelEvent(e);var t=+new Date,o=!1;return m.opt.preservenativescrolling&&m.checkarea+600<t&&(m.nativescrollingarea=m.isScrollable(e),o=!0),m.checkarea=t,!!m.nativescrollingarea||(m.locked?m.cancelEvent(e):l(e,!0,o))},this.stop=function(){return m.cancelScroll(),m.scrollmon&&m.scrollmon.stop(),m.cursorfreezed=!1,m.scroll.y=Math.round(m.getScrollTop()*(1/m.scrollratio.y)),m.noticeCursor(),m},this.getTransitionSpeed=function(e){var t=Math.round(10*m.opt.scrollspeed),e=Math.min(t,Math.round(e/20*m.opt.scrollspeed));return 20<e?e:0},m.opt.smoothscroll?m.ishwscroll&&f.hastransition&&m.opt.usetransition?(this.prepareTransition=function(e,t){t=t?20<e?e:0:m.getTransitionSpeed(e),e=t?f.prefixstyle+"transform "+t+"ms ease-out":"";return m.lasttransitionstyle&&m.lasttransitionstyle==e||(m.lasttransitionstyle=e,m.doc.css(f.transitionstyle,e)),t},this.doScrollLeft=function(e,t){var o=m.scrollrunning?m.newscrolly:m.getScrollTop();m.doScrollPos(e,o,t)},this.doScrollTop=function(e,t){var o=m.scrollrunning?m.newscrollx:m.getScrollLeft();m.doScrollPos(o,e,t)},this.doScrollPos=function(r,s,e){var t=m.getScrollTop(),o=m.getScrollLeft();return((m.newscrolly-t)*(s-t)<0||(m.newscrollx-o)*(r-o)<0)&&m.cancelScroll(),0==m.opt.bouncescroll&&(s<0?s=0:s>m.page.maxh&&(s=m.page.maxh),r<0?r=0:r>m.page.maxw&&(r=m.page.maxw)),(!m.scrollrunning||r!=m.newscrollx||s!=m.newscrolly)&&(m.newscrolly=s,m.newscrollx=r,m.newscrollspeed=e||!1,!m.timer&&void(m.timer=setTimeout(function(){var e=m.getScrollTop(),t=m.getScrollLeft(),o={};o.x=r-t,o.y=s-e,o.px=t,o.py=e;var i=Math.round(Math.sqrt(Math.pow(o.x,2)+Math.pow(o.y,2))),o=m.newscrollspeed&&1<m.newscrollspeed?m.newscrollspeed:m.getTransitionSpeed(i);m.newscrollspeed&&m.newscrollspeed<=1&&(o*=m.newscrollspeed),m.prepareTransition(o,!0),m.timerscroll&&m.timerscroll.tm&&clearInterval(m.timerscroll.tm),0<o&&(!m.scrollrunning&&m.onscrollstart&&(i={type:"scrollstart",current:{x:t,y:e},request:{x:r,y:s},end:{x:m.newscrollx,y:m.newscrolly},speed:o},m.onscrollstart.call(m,i)),f.transitionend?m.scrollendtrapped||(m.scrollendtrapped=!0,m.bind(m.doc,f.transitionend,m.onScrollEnd,!1)):(m.scrollendtrapped&&clearTimeout(m.scrollendtrapped),m.scrollendtrapped=setTimeout(m.onScrollEnd,o)),t=t,m.timerscroll={bz:new BezierClass(e,m.newscrolly,o,0,0,.58,1),bh:new BezierClass(t,m.newscrollx,o,0,0,.58,1)},m.cursorfreezed||(m.timerscroll.tm=setInterval(function(){m.showCursor(m.getScrollTop(),m.getScrollLeft())},60))),m.synched("doScroll-set",function(){m.timer=0,m.scrollendtrapped&&(m.scrollrunning=!0),m.setScrollTop(m.newscrolly),m.setScrollLeft(m.newscrollx),m.scrollendtrapped||m.onScrollEnd()})},50)))},this.cancelScroll=function(){if(!m.scrollendtrapped)return!0;var e=m.getScrollTop(),t=m.getScrollLeft();return m.scrollrunning=!1,f.transitionend||clearTimeout(f.transitionend),m.scrollendtrapped=!1,m._unbind(m.doc,f.transitionend,m.onScrollEnd),m.prepareTransition(0),m.setScrollTop(e),m.railh&&m.setScrollLeft(t),m.timerscroll&&m.timerscroll.tm&&clearInterval(m.timerscroll.tm),m.timerscroll=!1,m.cursorfreezed=!1,m.showCursor(e,t),m},this.onScrollEnd=function(){m.scrollendtrapped&&m._unbind(m.doc,f.transitionend,m.onScrollEnd),m.scrollendtrapped=!1,m.prepareTransition(0),m.timerscroll&&m.timerscroll.tm&&clearInterval(m.timerscroll.tm),m.timerscroll=!1;var e=m.getScrollTop(),t=m.getScrollLeft();if(m.setScrollTop(e),m.railh&&m.setScrollLeft(t),m.noticeCursor(!1,e,t),m.cursorfreezed=!1,e<0?e=0:e>m.page.maxh&&(e=m.page.maxh),t<0?t=0:t>m.page.maxw&&(t=m.page.maxw),e!=m.newscrolly||t!=m.newscrollx)return m.doScrollPos(t,e,m.opt.snapbackspeed);m.onscrollend&&m.scrollrunning&&(e={type:"scrollend",current:{x:t,y:e},end:{x:m.newscrollx,y:m.newscrolly}},m.onscrollend.call(m,e)),m.scrollrunning=!1}):(this.doScrollLeft=function(e,t){var o=m.scrollrunning?m.newscrolly:m.getScrollTop();m.doScrollPos(e,o,t)},this.doScrollTop=function(e,t){var o=m.scrollrunning?m.newscrollx:m.getScrollLeft();m.doScrollPos(o,e,t)},this.doScrollPos=function(e,t,o){t=void 0===t||!1===t?m.getScrollTop(!0):t;if(m.timer&&m.newscrolly==t&&m.newscrollx==e)return!0;m.timer&&h(m.timer),m.timer=0;var i=m.getScrollTop(),r=m.getScrollLeft();((m.newscrolly-i)*(t-i)<0||(m.newscrollx-r)*(e-r)<0)&&m.cancelScroll(),m.newscrolly=t,m.newscrollx=e,m.bouncescroll&&m.rail.visibility||(m.newscrolly<0?m.newscrolly=0:m.newscrolly>m.page.maxh&&(m.newscrolly=m.page.maxh)),m.bouncescroll&&m.railh.visibility||(m.newscrollx<0?m.newscrollx=0:m.newscrollx>m.page.maxw&&(m.newscrollx=m.page.maxw)),m.dst={},m.dst.x=e-r,m.dst.y=t-i,m.dst.px=r,m.dst.py=i;var s=Math.round(Math.sqrt(Math.pow(m.dst.x,2)+Math.pow(m.dst.y,2)));m.dst.ax=m.dst.x/s,m.dst.ay=m.dst.y/s;var n=0,l=s;0==m.dst.x?(n=i,l=t,m.dst.ay=1,m.dst.py=0):0==m.dst.y&&(n=r,l=e,m.dst.ax=1,m.dst.px=0);var a,s=m.getTransitionSpeed(s);o&&o<=1&&(s*=o),m.bzscroll=0<s&&(m.bzscroll?m.bzscroll.update(l,s):new BezierClass(n,l,s,0,1,0,1)),m.timer||((i==m.page.maxh&&t>=m.page.maxh||r==m.page.maxw&&e>=m.page.maxw)&&m.checkContentSize(),a=1,m.cancelAnimationFrame=!1,m.timer=1,m.onscrollstart&&!m.scrollrunning&&(s={type:"scrollstart",current:{x:r,y:i},request:{x:e,y:t},end:{x:m.newscrollx,y:m.newscrolly},speed:s},m.onscrollstart.call(m,s)),function e(){if(m.cancelAnimationFrame)return!0;if(m.scrollrunning=!0,a=1-a)return m.timer=d(e)||1;var t=0,o=sy=m.getScrollTop();m.dst.ay?(((i=(o=m.bzscroll?m.dst.py+m.bzscroll.getNow()*m.dst.ay:m.newscrolly)-sy)<0&&o<m.newscrolly||0<i&&o>m.newscrolly)&&(o=m.newscrolly),m.setScrollTop(o),o==m.newscrolly&&(t=1)):t=1;var i,r=sx=m.getScrollLeft();m.dst.ax?(((i=(r=m.bzscroll?m.dst.px+m.bzscroll.getNow()*m.dst.ax:m.newscrollx)-sx)<0&&r<m.newscrollx||0<i&&r>m.newscrollx)&&(r=m.newscrollx),m.setScrollLeft(r),r==m.newscrollx&&(t+=1)):t+=1,2==t?(m.timer=0,m.cursorfreezed=!1,m.bzscroll=!1,m.scrollrunning=!1,o<0?o=0:o>m.page.maxh&&(o=m.page.maxh),r<0?r=0:r>m.page.maxw&&(r=m.page.maxw),r!=m.newscrollx||o!=m.newscrolly?m.doScrollPos(r,o):m.onscrollend&&(o={type:"scrollend",current:{x:sx,y:sy},end:{x:m.newscrollx,y:m.newscrolly}},m.onscrollend.call(m,o))):m.timer=d(e)||1}(),(i==m.page.maxh&&i<=t||r==m.page.maxw&&r<=e)&&m.checkContentSize(),m.noticeCursor())},this.cancelScroll=function(){return m.timer&&h(m.timer),m.timer=0,m.bzscroll=!1,m.scrollrunning=!1,m}):(this.doScrollLeft=function(e,t){var o=m.getScrollTop();m.doScrollPos(e,o,t)},this.doScrollTop=function(e,t){var o=m.getScrollLeft();m.doScrollPos(o,e,t)},this.doScrollPos=function(e,t,o){var i=e>m.page.maxw?m.page.maxw:e;i<0&&(i=0);var r=t>m.page.maxh?m.page.maxh:t;r<0&&(r=0),m.synched("scroll",function(){m.setScrollTop(r),m.setScrollLeft(i)})},this.cancelScroll=function(){}),this.doScrollBy=function(e,t){var o=0;return o=t?Math.floor((m.scroll.y-e)*m.scrollratio.y):(m.timer?m.newscrolly:m.getScrollTop(!0))-e,m.bouncescroll&&(o<-(e=Math.round(m.view.h/2))?o=-e:o>m.page.maxh+e&&(o=m.page.maxh+e)),m.cursorfreezed=!1,py=m.getScrollTop(!0),o<0&&py<=0?m.noticeCursor():o>m.page.maxh&&py>=m.page.maxh?(m.checkContentSize(),m.noticeCursor()):void m.doScrollTop(o)},this.doScrollLeftBy=function(e,t){var o=0;return o=t?Math.floor((m.scroll.x-e)*m.scrollratio.x):(m.timer?m.newscrollx:m.getScrollLeft(!0))-e,m.bouncescroll&&(o<-(e=Math.round(m.view.w/2))?o=-e:o>m.page.maxw+e&&(o=m.page.maxw+e)),m.cursorfreezed=!1,px=m.getScrollLeft(!0),o<0&&px<=0||o>m.page.maxw&&px>=m.page.maxw?m.noticeCursor():void m.doScrollLeft(o)},this.doScrollTo=function(e,t){t=t?Math.round(e*m.scrollratio.y):e;t<0?t=0:t>m.page.maxh&&(t=m.page.maxh),m.cursorfreezed=!1,m.doScrollTop(e)},this.checkContentSize=function(){var e=m.getContentSize();e.h==m.page.h&&e.w==m.page.w||m.resize(!1,e)},m.onscroll=function(e){m.rail.drag||m.cursorfreezed||m.synched("scroll",function(){m.scroll.y=Math.round(m.getScrollTop()*(1/m.scrollratio.y)),m.railh&&(m.scroll.x=Math.round(m.getScrollLeft()*(1/m.scrollratio.x))),m.noticeCursor()})},m.bind(m.docscroll,"scroll",m.onscroll),this.doZoomIn=function(e){if(!m.zoomactive){m.zoomactive=!0,m.zoomrestore={style:{}};var t,o=["position","top","left","zIndex","backgroundColor","marginTop","marginBottom","marginLeft","marginRight"],i=m.win[0].style;for(t in o){var r=o[t];m.zoomrestore.style[r]=void 0!==i[r]?i[r]:""}m.zoomrestore.style.width=m.win.css("width"),m.zoomrestore.style.height=m.win.css("height"),m.zoomrestore.padding={w:m.win.outerWidth()-m.win.width(),h:m.win.outerHeight()-m.win.height()},f.isios4&&(m.zoomrestore.scrollTop=y(window).scrollTop(),y(window).scrollTop(0)),m.win.css({position:f.isios4?"absolute":"fixed",top:0,left:0,"z-index":b+100,margin:"0px"});var s=m.win.css("backgroundColor");return""!=s&&!/transparent|rgba\(0, 0, 0, 0\)|rgba\(0,0,0,0\)/.test(s)||m.win.css("backgroundColor","#fff"),m.rail.css({"z-index":b+101}),m.zoom.css({"z-index":b+102}),m.zoom.css("backgroundPosition","0px -18px"),m.resizeZoom(),m.onzoomin&&m.onzoomin.call(m),m.cancelEvent(e)}},this.doZoomOut=function(e){if(m.zoomactive)return m.zoomactive=!1,m.win.css("margin",""),m.win.css(m.zoomrestore.style),f.isios4&&y(window).scrollTop(m.zoomrestore.scrollTop),m.rail.css({"z-index":m.zindex}),m.zoom.css({"z-index":m.zindex}),m.zoomrestore=!1,m.zoom.css("backgroundPosition","0px 0px"),m.onResize(),m.onzoomout&&m.onzoomout.call(m),m.cancelEvent(e)},this.doZoom=function(e){return m.zoomactive?m.doZoomOut(e):m.doZoomIn(e)},this.resizeZoom=function(){var e;m.zoomactive&&(e=m.getScrollTop(),m.win.css({width:y(window).width()-m.zoomrestore.padding.w+"px",height:y(window).height()-m.zoomrestore.padding.h+"px"}),m.onResize(),m.setScrollTop(Math.min(m.page.maxh,e)))},this.init(),y.nicescroll.push(this)}var S=window.MutationObserver||window.WebKitMutationObserver||!1,p={zindex:"auto",cursoropacitymin:0,cursoropacitymax:1,cursorcolor:"#424242",cursorwidth:"5px",cursorborder:"1px solid #fff",cursorborderradius:"5px",scrollspeed:60,mousescrollstep:24,touchbehavior:!1,hwacceleration:!0,usetransition:!0,boxzoom:!1,dblclickzoom:!0,gesturezoom:!0,grabcursorenabled:!0,autohidemode:!0,background:"",iframeautoresize:!0,cursorminheight:32,preservenativescrolling:!0,railoffset:!1,bouncescroll:!0,spacebarenabled:!0,railpadding:{top:0,right:0,left:0,bottom:0},disableoutline:!0,horizrailenabled:!0,railalign:"right",railvalign:"bottom",enabletranslate3d:!0,enablemousewheel:!0,enablekeyboard:!0,smoothscroll:!0,sensitiverail:!0,enablemouselockapi:!0,cursorfixedheight:!1,directionlockdeadzone:6,hidecursordelay:400,nativeparentscrolling:!0,enablescrollonselection:!0,overflowx:!0,overflowy:!0,cursordragspeed:.3,rtlmode:!1,cursordragontouch:!1,oneaxismousemode:"auto"},n=!1,z=function(e){var d=this;this.nc=e,this.lastx=0,this.lasty=0,this.speedx=0,this.speedy=0,this.lasttime=0,this.steptime=0,this.snapx=!1,this.snapy=!1,this.demulx=0,this.demuly=0,this.lastscrollx=-1,this.lastscrolly=-1,this.chkx=0,this.chky=0,this.timer=0,this.time=function(){return+new Date},this.reset=function(e,t){d.stop();var o=d.time();d.steptime=0,d.lasttime=o,d.speedx=0,d.speedy=0,d.lastx=e,d.lasty=t,d.lastscrollx=-1,d.lastscrolly=-1},this.update=function(e,t){var o=d.time();d.steptime=o-d.lasttime,d.lasttime=o;var i=t-d.lasty,r=e-d.lastx,s=d.nc.getScrollTop()+i,o=d.nc.getScrollLeft()+r;d.snapx=o<0||o>d.nc.page.maxw,d.snapy=s<0||s>d.nc.page.maxh,d.speedx=r,d.speedy=i,d.lastx=e,d.lasty=t},this.stop=function(){d.nc.unsynched("domomentum2d"),d.timer&&clearTimeout(d.timer),d.timer=0,d.lastscrollx=-1,d.lastscrolly=-1},this.doSnapy=function(e,t){var o=!1;t<0?o=!(t=0):t>d.nc.page.maxh&&(t=d.nc.page.maxh,o=!0),e<0?o=!(e=0):e>d.nc.page.maxw&&(e=d.nc.page.maxw,o=!0),o&&d.nc.doScrollPos(e,t,d.nc.opt.snapbackspeed)},this.doMomentum=function(e){var t=d.time(),o=e?t+e:d.lasttime,i=d.nc.getScrollLeft(),e=d.nc.getScrollTop(),r=d.nc.page.maxh,s=d.nc.page.maxw;d.speedx=0<s?Math.min(60,d.speedx):0,d.speedy=0<r?Math.min(60,d.speedy):0;o=o&&t-o<=60;(e<0||r<e||i<0||s<i)&&(o=!1);var n,l,a,c,i=!(!d.speedy||!o)&&d.speedy,o=!(!d.speedx||!o)&&d.speedx;i||o?(50<(n=Math.max(16,d.steptime))&&(o=n/50,d.speedx*=o,d.speedy*=o,n=50),d.demulxy=0,d.lastscrollx=d.nc.getScrollLeft(),d.chkx=d.lastscrollx,d.lastscrolly=d.nc.getScrollTop(),d.chky=d.lastscrolly,l=d.lastscrollx,a=d.lastscrolly,(c=function(){var e=600<d.time()-t?.04:.02;d.speedx&&(l=Math.floor(d.lastscrollx-d.speedx*(1-d.demulxy)),((d.lastscrollx=l)<0||s<l)&&(e=.1)),d.speedy&&(a=Math.floor(d.lastscrolly-d.speedy*(1-d.demulxy)),((d.lastscrolly=a)<0||r<a)&&(e=.1)),d.demulxy=Math.min(1,d.demulxy+e),d.nc.synched("domomentum2d",function(){d.speedx&&(d.nc.getScrollLeft()!=d.chkx&&d.stop(),d.chkx=l,d.nc.setScrollLeft(l)),d.speedy&&(d.nc.getScrollTop()!=d.chky&&d.stop(),d.chky=a,d.nc.setScrollTop(a)),d.timer||(d.nc.hideCursor(),d.doSnapy(l,a))}),d.demulxy<1?d.timer=setTimeout(c,n):(d.stop(),d.nc.hideCursor(),d.doSnapy(l,a))})()):d.doSnapy(d.nc.getScrollLeft(),d.nc.getScrollTop())}},l=e.fn.scrollTop;e.cssHooks.pageYOffset={get:function(e,t,o){var i=y.data(e,"__nicescroll")||!1;return i&&i.ishwscroll?i.getScrollTop():l.call(e)},set:function(e,t){var o=y.data(e,"__nicescroll")||!1;return o&&o.ishwscroll?o.setScrollTop(parseInt(t)):l.call(e,t),this}},e.fn.scrollTop=function(t){if(void 0!==t)return this.each(function(){var e=y.data(this,"__nicescroll")||!1;e&&e.ishwscroll?e.setScrollTop(parseInt(t)):l.call(y(this),t)});var e=this[0]&&y.data(this[0],"__nicescroll")||!1;return e&&e.ishwscroll?e.getScrollTop():l.call(this)};var m=e.fn.scrollLeft;function f(e){var i=this;if(this.length=0,this.name="nicescrollarray",this.each=function(e){for(var t=0,o=0;t<i.length;t++)e.call(i[t],o++);return i},this.push=function(e){i[i.length]=e,i.length++},this.eq=function(e){return i[e]},e)for(a=0;a<e.length;a++){var t=y.data(e[a],"__nicescroll")||!1;t&&(this[this.length]=t,this.length++)}return this}y.cssHooks.pageXOffset={get:function(e,t,o){var i=y.data(e,"__nicescroll")||!1;return i&&i.ishwscroll?i.getScrollLeft():m.call(e)},set:function(e,t){var o=y.data(e,"__nicescroll")||!1;return o&&o.ishwscroll?o.setScrollLeft(parseInt(t)):m.call(e,t),this}},e.fn.scrollLeft=function(t){if(void 0!==t)return this.each(function(){var e=y.data(this,"__nicescroll")||!1;e&&e.ishwscroll?e.setScrollLeft(parseInt(t)):m.call(y(this),t)});var e=this[0]&&y.data(this[0],"__nicescroll")||!1;return e&&e.ishwscroll?e.getScrollLeft():m.call(this)},function(e,t,o){for(var i=0;i<t.length;i++)o(e,t[i])}(f.prototype,["show","hide","toggle","onResize","resize","remove","stop","doScrollPos"],function(e,t){e[t]=function(){var e=arguments;return this.each(function(){this[t].apply(this,e)})}}),e.fn.getNiceScroll=function(e){return void 0===e?new f(this):this[e]&&y.data(this[e],"__nicescroll")||!1},e.extend(e.expr[":"],{nicescroll:function(e){return!!y.data(e,"__nicescroll")}}),y.fn.niceScroll=function(e,t){void 0===t&&("object"!=typeof e||"jquery"in e||(t=e,e=!1));var o=new f;void 0===t&&(t={}),e&&(t.doc=y(e),t.win=y(this));var i=!("doc"in t);return i||"win"in t||(t.win=y(this)),this.each(function(){var e=y(this).data("__nicescroll")||!1;e||(t.doc=i?y(this):t.doc,e=new s(t,y(this)),y(this).data("__nicescroll",e)),o.push(e)}),1==o.length?o[0]:o},window.NiceScroll={getjQuery:function(){return e}},y.nicescroll||(y.nicescroll=new f,y.nicescroll.options=p)}(jQuery);